(disk)=

# Disk and partition

<meta name="description" content="Documentation on the disk monitor">


## Description

The {ref}`Splunk Distribution of OpenTelemetry Collector <otel-intro>` deploys this integration as the disk and partition monitor using the Smart Agent Receiver. This plugin provides disk metrics for Splunk Observability Cloud. 

Use alerts and thresholds based on the plugin metrics to avoid filling disks to capacity. The Smart Agent plugin computes aggregated utilization metrics based on the output of this plugin.

The disk and partition plugin collects performance statistics of hard disks and, where supported, partitions. Two of the provided metrics are calculated as follows:

 * `merged`: Number of operations that can be merged into other, already queued operations. For example, one physical disk access served two or more logical operations.
 * `time`: Average time an I/O operation took to complete.

 Since version 5.5, there are additional metrics on the Linux platform:

 * `io_time`: Time spent doing I/Os, in milliseconds. You can treat this metric as a device load percentage. The value of 1 second spent matches 100% of load.
 * `weighted_io_time`: Measure of both I/O completion time and the backlog that might be accumulating.
 * `pending_operations`: Queue size of pending I/O operations.

For details about these metrics, see the kernel documentation at https://www.kernel.org/doc/Documentation/iostats.txt, which includes explanations of "Field 9", "Field 10", and "Field 11".

<!---
This plugin requires collectd version 1.5+.
--->

## Installation

This monitor is provided by the Smart Agent and is available by using the SignalFx Smart Agent Receiver in the {ref}`Splunk Distribution of OpenTelemetry Collector <otel-intro>`.

To install this integration:

1. Deploy the Splunk Distribution of OpenTelemetry Collector to your host or container platform.
2. Configure the monitor, as described in the next section.

## Configuration

The Splunk Distribution of OpenTelemetry Collector allows embedding a Smart Agent monitor configuration in an associated Smart Agent Receiver instance.

**Note:** Providing a disk and partition monitor entry in your Smart Agent or Collector configuration is required for its use. Use the appropriate form for your agent type.

### Smart Agent

To activate this monitor in the Smart Agent, add the following to your agent configuration:  
```
monitors:  # All monitor config goes under this key
 - type: collectd/disk
   ...  # Additional config
```

See <a href="https://docs.splunk.com/Observability/gdi/smart-agent/smart-agent-resources.html#configure-the-smart-agent" target="_blank">Smart Agent example configuration</a> for an autogenerated example of a YAML configuration file, with default values where applicable.

### Splunk Distribution of OpenTelemetry Collector

If you are using the Splunk Distribution of OpenTelemetry Collector and want to collect disk I/O metrics, use the {ref}`host-metrics-receiver`.

### Configuration settings

The following table shows the configuration options for this monitor:

| Option | Definition | Default value |
| ---------------------|------------|---------------|
| Disk | Include specific Disk(s) | "sda" "/^hd/" |
| IgnoreSelected  | Ignore the designation of specific Disks | `false` |


## Metrics
The following metrics are available for this integration:

<div class="metrics-yaml" url="https://raw.githubusercontent.com/signalfx/signalfx-agent/main/pkg/monitors/collectd/disk/metadata.yaml"></div>

## Troubleshooting

```{include} /_includes/troubleshooting.md
```
